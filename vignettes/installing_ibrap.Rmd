---
title: "Installing & Preparing IBRAP"
author: "Connor H Knight & Faraz Khan"
date: "11/08/2021"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Installing & Preparing IBRAP}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/"
)
```

```{r klippy, echo=FALSE, include=TRUE}
klippy::klippy(tooltip_message = 'Click to copy', tooltip_success = 'Done', position = c('bottom', 'right'))
```

## IBRAP requirements

IBRAP requires R version >=4.0.4 to function.
We also provide decontX which is contained within the celda package. However, an issue for celda is that it requires ImageMagick which is known to be problematic in a HPC environment. Thus, we have developed two installations: one with celda and one without. You can attempt the installation containing the celda package and if you encounter issues you can debug them. If you do not require decontX or are unable to debug the installation you may use our without celda installatiion. 

We have developed a separate tutorial with a few common issues encountered in hpc environment here. 

## With celda package

```{r, eval=F, echo=T}
install.packages('devtools')
devtools::install_github('connorhknight/IBRAP')

```

## Without celda package

```{r, eval=F, echo=T}
install.packages('devtools')
devtools::install_github('connorhknight/IBRAP_no_decontX')

```

## Preparing reticulate

IBRAP not only uses packages within R, but also through python. For this, we use reticulate to interface python into the R environment. To setup reticulate we must start by installing miniconda:

```{r, eval=F, echo=T}
reticulate::install_miniconda()

```

Once miniconda is installed it will produce an environment called r-reticulate. Next, we must assure the correct packages are installed within the new environment:

```{r, eval=F, echo=T}
prepare.reticulate()

```

Once this has been completed, you are ready to use IBRAP! For a basic understand of a single sample workflow please use the [getting started](https://connorhknight.github.io/IBRAP/articles/using_IBRAP.html) tutorial. For multi-sample analysis, you can divert to the [integration](https://connorhknight.github.io/IBRAP/articles/integration.html) tutorial. 

Good luck!
